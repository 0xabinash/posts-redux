import{d as v,a as I,u as f,b as h,s as C,e as S,r as p,j as e,f as F,g as D}from"./index-qBSOlqZ8.js";const k=()=>{const{postId:d}=v(),r=I(),c=f(),x=h(C),t=h(s=>S(s,Number(d))),[o,a]=p.useState({title:t==null?void 0:t.title,body:t==null?void 0:t.body,userId:t==null?void 0:t.userId}),[b,n]=p.useState("idle");if(!t)return e.jsx("section",{children:e.jsx("h2",{children:"Post Not Found"})});const l=s=>{a({...o,[s.target.name]:s.target.value})},u=[o.title,o.body,o.userId].every(Boolean)&&b==="idle",y=s=>{if(u)try{n("pending");const{title:i,body:g,userId:P}=o;r(F({id:t.id,reactions:t.reactions,title:i,body:g,userId:Number(P)})).unwrap(),a({title:"",body:"",userId:""}),c(`/post/${d}`)}catch(i){console.log("Failed to save post",i)}finally{n("idle")}},j=()=>{try{n("pending"),r(D({id:t.id})),a({title:"",body:"",userId:""}),c("/")}catch(s){console.log("Failed to delete post",s)}finally{n("idle")}},m=x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id));return e.jsxs("section",{children:[e.jsx("h2",{children:"Edit Post"}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"postTitle",children:"Title"}),e.jsx("input",{value:o.title,id:"postTitle",type:"text",name:"title",onChange:l}),e.jsx("label",{htmlFor:"postAuthor",children:"Author"}),e.jsxs("select",{defaultValue:o.userId,name:"userId",id:"postAuthor",onChange:l,children:[e.jsx("option",{value:""}),m]}),e.jsx("label",{htmlFor:"",children:"Content"}),e.jsx("textarea",{value:o.body,id:"postBody",type:"text",name:"body",onChange:l}),e.jsx("button",{type:"button",onClick:y,disabled:!u,children:"Save Post"}),e.jsx("button",{type:"button",onClick:j,children:"Delete Post"})]})]})};export{k as default};
